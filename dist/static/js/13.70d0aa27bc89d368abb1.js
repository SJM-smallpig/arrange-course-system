webpackJsonp([13],{QErJ:function(t,e){},QfuC:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("7t+N");var a={components:{},props:{},data:function(){return{isNameExit:!1,isModify:"修改",isShowFourStageData:!1,showLoading:!0,tableLastItem:!0,status:"进行中",activeNames:[],teachClassData:[]}},watch:{},computed:{},methods:{showTableLastItem:function(t){1==this.isShowFourStageData&&this.$nextTick(function(){if("noShow"==t)for(var e=document.getElementsByClassName("icon"),s=0;s<e.length;s++)e[s].setAttribute("style","visibility:hidden")})},getModify:function(){var t=document.getElementsByClassName("icon");if("修改"==this.isModify){this.isModify="确定";for(var e=0;e<t.length;e++)t[e].setAttribute("style","visibility:normal");this.showTableLastItem("show")}else{this.isModify="修改";for(var s=0;s<t.length;s++)t[s].setAttribute("style","visibility:hidden")}},handleChange:function(t){},getAllCollapse:function(){this.activeNames=[]},addData:function(t){console.log(t)},toRuleFourthStage:function(){"修改"==this.isModify?this.$router.push({path:"/taskLists",name:"taskLists",query:{taskId:this.taskId}}):alert("请先点击折叠面板确认按钮！")},getThourResultStage:function(t){var e=this;e.$axios({url:e.$root.URL+"/runtask?taskId="+t+"&stage=4",method:"post",crossDomain:!0}).then(function(s){200===s.status&&(e.timer=setInterval(function(){e.$axios({url:e.$root.URL+"/result?taskId="+t+"&stage=4&distribution=0",method:"get",crossDomain:!0}).then(function(t){200===t.status&&""!=t.data&&(clearInterval(e.timer),e.status="已完成",e.showLoading=!1,e.isShowFourStageData=!0,e.teachClassData=t.data.fourStageScoreData,e.showTableLastItem("noShow"))}).catch(function(t){clearInterval(e.timer),t.response?404===t.response.status&&e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"correct"}}):t.request?(e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log(t.request)):(e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log("Error",t.message)),console.log(t.request)})},1e3))}).catch(function(t){console.log(t)})},isThourResultStage:function(t){var e=this;e.$axios({url:this.$root.URL+"/taskstatus?taskId="+t,method:"get",crossDomain:!0}).then(function(s){if(200===s.status)for(var a in s.data.tasksStageMap)a==t&&(s.data.tasksStageMap[a]<4?e.getThourResultStage(t):(e.status="已完成",e.showLoading=!1,e.isShowFourStageData=!0,e.$axios({url:e.$root.URL+"/result?taskId="+t+"&stage=4&distribution=0",method:"get",crossDomain:!0}).then(function(t){console.log(t.data),200===t.status&&""!=t.data&&(e.teachClassData=t.data.fourStageScoreData,e.showTableLastItem("noShow"))}).catch(function(t){t.response?404===t.response.status&&e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"correct"}}):t.request?(e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log(t.request)):(e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log("Error",t.message)),console.log(t.request)})))}).catch(function(t){t.response?404===t.response.status&&e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"correct"}}):t.request?(e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log(t.request)):(e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log("Error",t.message)),console.log(t.request)})}},created:function(){},mounted:function(){var t=this.$route.query;this.taskId=t.taskId,this.isNameExit=t.isNameExit,0==this.isNameExit?this.getThourResultStage(this.taskId):this.isThourResultStage(this.taskId)}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"r-main"},[s("div",[s("span",{staticClass:"r-title"},[t._v("任务状态")]),t._v(" "),s("span",{staticClass:"status"},[t._v("分班第四阶段:")]),t._v(" "),s("div",{staticClass:"showing"},[s("span",{staticClass:"status"},[t._v(t._s(t.status))]),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:!t.isShowFourStageData,expression:"!isShowFourStageData"}],staticClass:"el-icon-refresh-right status el-making"})])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}]},[t._m(0)]),t._v(" "),s("el-collapse",{directives:[{name:"show",rawName:"v-show",value:t.isShowFourStageData,expression:"isShowFourStageData"}],on:{change:t.handleChange},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.teachClassData,function(e){return s("el-collapse-item",{key:e.index,attrs:{title:e.title,name:e.name},model:{value:t.teachClassData,callback:function(e){t.teachClassData=e},expression:"teachClassData"}},[s("div",[s("el-button",{staticClass:"modify",attrs:{type:"primary",round:"",size:"mini"},on:{click:t.getModify}},[t._v(t._s(t.isModify))])],1),t._v(" "),s("el-table",{staticClass:"group",attrs:{data:e.Group,border:"",id:"group",stripe:"",size:"mini","header-cell-style":{background:"#eef1f6",color:"#606266"}}},[s("el-table-column",{attrs:{prop:"group",label:e.title,width:"100",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{prop:"c13",label:"历地政",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"show-last-item"},[""!=e.row.c13?s("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),s("span",{staticClass:"row-num"},[t._v(t._s(e.row.c13))]),t._v(" "),""!=e.row.c13?s("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(s){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{prop:"c21",label:"历地生",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"show-last-item"},[""!=e.row.c21?s("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),s("span",{staticClass:"row-num"},[t._v(t._s(e.row.c21))]),t._v(" "),""!=e.row.c21?s("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(s){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{prop:"c37",label:"历地化",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"show-last-item"},[""!=e.row.c37?s("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),s("span",{staticClass:"row-num"},[t._v(t._s(e.row.c37))]),t._v(" "),""!=e.row.c37?s("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(s){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{prop:"c25",label:"历政生",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"show-last-item"},[""!=e.row.c25?s("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),s("span",{staticClass:"row-num"},[t._v(t._s(e.row.c25))]),t._v(" "),""!=e.row.c25?s("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(s){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{prop:"c41",label:"历政化",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"show-last-item"},[""!=e.row.c41?s("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),s("span",{staticClass:"row-num"},[t._v(t._s(e.row.c41))]),t._v(" "),""!=e.row.c41?s("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(s){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{prop:"c49",label:"历生化",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"show-last-item"},[""!=e.row.c49?s("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),s("span",{staticClass:"row-num"},[t._v(t._s(e.row.c49))]),t._v(" "),""!=e.row.c49?s("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(s){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{prop:"c14",label:"物地政",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"show-last-item"},[""!=e.row.c14?s("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),s("span",{staticClass:"row-num"},[t._v(t._s(e.row.c14))]),t._v(" "),""!=e.row.c14?s("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(s){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{prop:"c22",label:"物地生",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"show-last-item"},[""!=e.row.c22?s("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),s("span",{staticClass:"row-num"},[t._v(t._s(e.row.c22))]),t._v(" "),""!=e.row.c22?s("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(s){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{prop:"c38",label:"物地化",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"show-last-item"},[""!=e.row.c38?s("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),s("span",{staticClass:"row-num"},[t._v(t._s(e.row.c38))]),t._v(" "),""!=e.row.c38?s("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(s){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{prop:"c26",label:"物政生",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"show-last-item"},[""!=e.row.c26?s("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),s("span",{staticClass:"row-num"},[t._v(t._s(e.row.c26))]),t._v(" "),""!=e.row.c26?s("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(s){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{prop:"c42",label:"物政化",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"show-last-item"},[""!=e.row.c42?s("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),s("span",{staticClass:"row-num"},[t._v(t._s(e.row.c42))]),t._v(" "),""!=e.row.c42?s("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(s){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{prop:"c50",label:"物生化",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"show-last-item"},[""!=e.row.c50?s("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),s("span",{staticClass:"row-num"},[t._v(t._s(e.row.c50))]),t._v(" "),""!=e.row.c50?s("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(s){return t.addData(e.row)}}}):t._e()])]}}],null,!0)})],1)],1)}),1),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isShowFourStageData,expression:"isShowFourStageData"}],staticClass:"next-btn",attrs:{type:"warning",size:"small"},on:{click:t.toRuleFourthStage}},[t._v("下一步")]),t._v(" "),s("div",{staticClass:"all-collapse",on:{click:t.getAllCollapse}},[s("span",{staticClass:"row-num"},[t._v("全部折叠")]),t._v(" "),s("i",{staticClass:"el-icon-d-caret"})]),t._v(" "),[s("el-backtop",{staticClass:".page-component__scroll .el-scrollbar__wrap",attrs:{bottom:50}},[s("div",{staticClass:"up"},[s("i",{staticClass:"el-icon-caret-top"})])])]],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner"},[e("div",{staticClass:"bounce1"}),this._v(" "),e("div",{staticClass:"bounce2"}),this._v(" "),e("div",{staticClass:"bounce3"})])}]};var i=s("VU/8")(a,o,!1,function(t){s("QErJ")},"data-v-4fac52ec",null);e.default=i.exports}});
//# sourceMappingURL=13.70d0aa27bc89d368abb1.js.map