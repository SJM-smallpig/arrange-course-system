webpackJsonp([12],{dp8E:function(t,e){},i1vw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("7t+N");var s={components:{},props:{},data:function(){return{isModify:"修改",showLoading:!0,tableLastItem:!0,status:"进行中",isShowThreeData:!1,activeNames:[],isNameExit:!1,tableData:[{threeStageScoreData:[],tableClassData:[]}]}},watch:{},computed:{},methods:{showColor:function(t){for(var e in t){var a=parseInt(t[e]);document.getElementsByClassName("el-collapse-item__header")[a-1].setAttribute("style","color:#409eff")}},noColor:function(t){console.log(t);document.getElementsByClassName("el-collapse-item__header is-active")[t-1].setAttribute("style","color:#99a9bf")},showTableLastItem:function(t){1==this.isShowThreeData&&this.$nextTick(function(){if("noShow"==t)for(var e=document.getElementsByClassName("icon"),a=0;a<e.length;a++)e[a].setAttribute("style","visibility:hidden")})},getModify:function(){var t=this;1==t.isShowThreeData&&t.$nextTick(function(){var e=document.getElementsByClassName("icon");if("修改"==t.isModify){t.isModify="确定";for(var a=0;a<e.length;a++)e[a].setAttribute("style","visibility:normal");t.showTableLastItem("show")}else{t.isModify="修改";for(var s=0;s<e.length;s++)e[s].setAttribute("style","visibility:hidden")}})},handleChange:function(t){},getAllCollapse:function(){this.activeNames=[]},addData:function(t){console.log(t)},getThreeResultStage:function(t){console.log("3333");var e=this;e.$axios({url:e.$root.URL+"/runtask?taskId="+t+"&stage=3",method:"post",crossDomain:!0}).then(function(a){200===a.status&&(e.timer=setInterval(function(){e.$axios({url:e.$root.URL+"/result?taskId="+t+"&stage=3&distribution=0",method:"get",crossDomain:!0}).then(function(t){200===t.status&&""!=t.data&&(clearInterval(e.timer),e.status="已完成",e.showLoading=!1,e.isShowThreeData=!0,e.tableData[0].tableClassData=t.data.tableClassData,e.tableData[0].threeStageScoreData=t.data.threeStageScoreData,console.log(t.data),console.log(e.tableData[0].tableClassData),e.showTableLastItem("noShow"))}).catch(function(t){clearInterval(e.timer),t.response?404===t.response.status&&e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"correct"}}):t.request?(e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log(t.request)):(e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log("Error",t.message)),console.log(t.request)})},1e3))}).catch(function(t){console.log(t)})},isThreeResultStage:function(t){var e=this;e.$axios({url:this.$root.URL+"/taskstatus?taskId="+t,method:"get",crossDomain:!0}).then(function(a){if(200===a.status)for(var s in a.data.tasksStageMap)s==t&&(a.data.tasksStageMap[s]<3?e.getThreeResultStage(t):(e.status="已完成",e.showLoading=!1,e.isShowThreeData=!0,e.$axios({url:e.$root.URL+"/result?taskId="+t+"&stage=3&distribution=0",method:"get",crossDomain:!0}).then(function(t){200===t.status&&""!=t.data&&(console.log(t.data),e.tableData[0].tableClassData=t.data.tableClassData,e.tableData[0].threeStageScoreData=t.data.threeStageScoreData,e.showTableLastItem("noShow"))}).catch(function(t){t.response?404===t.response.status&&e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"correct"}}):t.request?(e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log(t.request)):(e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log("Error",t.message)),console.log(t.request)})))}).catch(function(t){t.response?404===t.response.status&&e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"correct"}}):t.request?(e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log(t.request)):(e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log("Error",t.message)),console.log(t.request)})},toRuleFourthStage:function(){"修改"==this.isModify?this.$router.push({path:"@/components/rulesStage/RuleFourthStage",name:"ruleFourthStage",query:{taskId:this.taskId,isNameExit:this.isNameExit}}):alert("请先点击折叠面板确认按钮！")}},created:function(){},mounted:function(){var t=this.$route.query;this.taskId=t.taskId,console.log(this.taskId),this.isNameExit=t.isNameExit,0==this.isNameExit?this.getThreeResultStage(this.taskId):this.isThreeResultStage(this.taskId)},beforeDestroy:function(){clearInterval(this.timer)}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"r-main"},[a("div",[a("span",{staticClass:"r-title"},[t._v("任务状态")]),t._v(" "),a("span",{staticClass:"status"},[t._v("分班第三阶段:")]),t._v(" "),a("div",{staticClass:"showing"},[a("span",{staticClass:"status"},[t._v(t._s(t.status))]),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:!t.isShowThreeData,expression:"!isShowThreeData"}],staticClass:"el-icon-refresh-right status el-making"})])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}]},[t._m(0)]),t._v(" "),a("el-collapse",{directives:[{name:"show",rawName:"v-show",value:t.isShowThreeData,expression:"isShowThreeData"}],on:{change:t.handleChange},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[t._l(t.tableData,function(e){return[a("el-collapse-item",{key:e.index,attrs:{title:"评分参考",name:"1"}},[a("el-table",{staticClass:"three-score-table",attrs:{data:e.threeStageScoreData,border:"",stripe:"",size:"mini","header-cell-style":{background:"#eef1f6",color:"#606266"}},model:{value:e.threeStageScoreData,callback:function(a){t.$set(e,"threeStageScoreData",a)},expression:"item.threeStageScoreData"}},[a("el-table-column",{attrs:{prop:"group",label:"分组",align:"center",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"1",label:"历史",align:"center",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"2",label:"物理",align:"center",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"4",label:"地理",align:"center",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"8",label:"政治",align:"center",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"16",label:"生物",align:"center",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"32",label:"化学",align:"center",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"isHPMix",label:"是否历物混合",align:"center",width:"100px"}})],1)],1),t._v(" "),t._l(e.tableClassData,function(s){return a("el-collapse-item",{key:s.index,attrs:{title:s.title,name:s.name},model:{value:e.tableClassData,callback:function(a){t.$set(e,"tableClassData",a)},expression:"item.tableClassData"}},[a("div",[a("el-button",{staticClass:"modify",attrs:{type:"primary",round:"",size:"mini"},on:{click:t.getModify}},[t._v(t._s(t.isModify))])],1),t._v(" "),a("el-table",{staticClass:"group",attrs:{data:s.Group,border:"",id:"group",stripe:"",size:"mini","header-cell-style":{background:"#eef1f6",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"group",label:"第一组",width:"80",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"c13",label:"历地政",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"show-last-item"},[""!=e.row.c13?a("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),a("span",{staticClass:"row-num"},[t._v(t._s(e.row.c13))]),t._v(" "),""!=e.row.c13?a("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(a){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"c21",label:"历地生",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"show-last-item"},[""!=e.row.c21?a("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),a("span",{staticClass:"row-num"},[t._v(t._s(e.row.c21))]),t._v(" "),""!=e.row.c21?a("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(a){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"c37",label:"历地化",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"show-last-item"},[""!=e.row.c37?a("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),a("span",{staticClass:"row-num"},[t._v(t._s(e.row.c37))]),t._v(" "),""!=e.row.c37?a("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(a){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"c25",label:"历政生",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"show-last-item"},[""!=e.row.c25?a("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),a("span",{staticClass:"row-num"},[t._v(t._s(e.row.c25))]),t._v(" "),""!=e.row.c25?a("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(a){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"c41",label:"历政化",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"show-last-item"},[""!=e.row.c41?a("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),a("span",{staticClass:"row-num"},[t._v(t._s(e.row.c41))]),t._v(" "),""!=e.row.c41?a("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(a){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"c49",label:"历生化",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"show-last-item"},[""!=e.row.c49?a("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),a("span",{staticClass:"row-num"},[t._v(t._s(e.row.c49))]),t._v(" "),""!=e.row.c49?a("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(a){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"c14",label:"物地政",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"show-last-item"},[""!=e.row.c14?a("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),a("span",{staticClass:"row-num"},[t._v(t._s(e.row.c14))]),t._v(" "),""!=e.row.c14?a("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(a){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"c22",label:"物地生",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"show-last-item"},[""!=e.row.c22?a("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),a("span",{staticClass:"row-num"},[t._v(t._s(e.row.c22))]),t._v(" "),""!=e.row.c22?a("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(a){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"c38",label:"物地化",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"show-last-item"},[""!=e.row.c38?a("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),a("span",{staticClass:"row-num"},[t._v(t._s(e.row.c38))]),t._v(" "),""!=e.row.c38?a("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(a){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"c26",label:"物政生",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"show-last-item"},[""!=e.row.c26?a("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),a("span",{staticClass:"row-num"},[t._v(t._s(e.row.c26))]),t._v(" "),""!=e.row.c26?a("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(a){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"c42",label:"物政化",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"show-last-item"},[""!=e.row.c42?a("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),a("span",{staticClass:"row-num"},[t._v(t._s(e.row.c42))]),t._v(" "),""!=e.row.c42?a("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(a){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"c50",label:"物生化",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"show-last-item"},[""!=e.row.c50?a("i",{staticClass:"el-icon-remove-outline icon"}):t._e(),t._v(" "),a("span",{staticClass:"row-num"},[t._v(t._s(e.row.c50))]),t._v(" "),""!=e.row.c50?a("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(a){return t.addData(e.row)}}}):t._e()])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"total",width:"80",align:"center",label:"班级总人数"}})],1)],1)})]})],2),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isShowThreeData,expression:"isShowThreeData"}],staticClass:"next-btn",attrs:{type:"warning",size:"small"},on:{click:t.toRuleFourthStage}},[t._v("下一步")]),t._v(" "),a("div",{staticClass:"all-collapse",on:{click:t.getAllCollapse}},[a("span",{staticClass:"row-num"},[t._v("全部折叠")]),t._v(" "),a("i",{staticClass:"el-icon-d-caret"})]),t._v(" "),[a("el-backtop",{staticClass:".page-component__scroll .el-scrollbar__wrap",attrs:{bottom:50}},[a("div",{staticClass:"up"},[a("i",{staticClass:"el-icon-caret-top"})])])],t._v(" "),a("el-popover",{ref:"popover4",attrs:{placement:"right",width:"697",trigger:"hover"}},[t._l(t.tableData,function(e){return[a("el-table",{key:e.index,staticClass:"four-score-table",attrs:{data:e.threeStageScoreData,border:"",stripe:"",size:"mini","header-cell-style":{background:"#eef1f6",color:"#606266"}},model:{value:e.threeStageScoreData,callback:function(a){t.$set(e,"threeStageScoreData",a)},expression:"item.threeStageScoreData"}},[a("el-table-column",{attrs:{prop:"group",label:"分组",align:"center",width:"85px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"1",label:"历史",align:"center",width:"85px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"2",label:"物理",align:"center",width:"85px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"4",label:"地理",align:"center",width:"85px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"8",label:"政治",align:"center",width:"85px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"16",label:"生物",align:"center",width:"85px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"32",label:"化学",align:"center",width:"85px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"isHPMix",label:"是否历物混合",align:"center",width:"100px"}})],1)]})],2),t._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popover4",arg:"popover4"}],staticClass:"show-data"},[a("span",[t._v("评分结果")])])],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner"},[e("div",{staticClass:"bounce1"}),this._v(" "),e("div",{staticClass:"bounce2"}),this._v(" "),e("div",{staticClass:"bounce3"})])}]};var o=a("VU/8")(s,l,!1,function(t){a("dp8E")},"data-v-57b56219",null);e.default=o.exports}});
//# sourceMappingURL=12.7d1de0a37672cd838fb6.js.map