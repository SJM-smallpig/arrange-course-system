webpackJsonp([14],{"2FJW":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={components:{},props:{},data:function(){return{taskNameArray:[]}},watch:{},computed:{taskLists:function(){return this.$store.state.taskListName}},methods:{getData:function(){var e=this.$store.state.taskListName;this.taskNameArray=e},openAddName:function(){this.$router.push({path:"@/views/divide-class-manage/setRules",name:"setRules",query:{}})},deleteTask:function(e){var t=this;t.$confirm("是否删除"+e+"这一任务","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios({url:t.$root.URL+"/delete?taskId="+e,method:"delete",crossDomain:!0}).then(function(s){if(200==s.status){console.log("删除成功");for(var a=0;a<t.taskNameArray.length;a++)t.taskNameArray[a].taskName==e&&(t.taskNameArray.splice(a,1),t.$message({type:"success",message:"删除成功!"}))}}).catch(function(e){e.response?404===e.response.status&&t.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"correct"}}):e.request?(t.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log(e.request)):(t.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log("Error",e.message)),console.log(e.request)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},setName:function(e){var t=this;t.$prompt("请输入新名称","重命名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[a-zA-Z0-9\u4e00-\u9fa5]+$/,inputErrorMessage:"任务名称格式不正确，只能包含汉字，数字，字母"}).then(function(s){var a=s.value,r={};r.oldName=e,r.reName=a,t.$store.commit("LIST_RENAME",r),t.$message({type:"success",message:"重命名成功!"})}).catch(function(){t.$message({type:"info",message:"取消输入"})})},toSetRules:function(e){this.$router.push({path:"@/views/divide-class-manage/setRules",name:"setRules",query:{taskName:e}})},getTasksStatusForClassStrategy:function(){var e=this;e.taskNameArray=[],e.$axios({url:e.$root.URL+"/taskstatus",method:"get",crossDomain:!0}).then(function(t){var s=t.data.tasksStageMap,a={};for(var r in s)a.taskName=r,e.taskNameArray.push(a),a={}}).catch(function(t){t.response?404===t.response.status&&e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"correct"}}):t.request?(e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log(t.request)):(e.$router.push({path:"@/views/loginFailed",name:"loginFailed",query:{error:"error"}}),console.log("Error",t.message)),console.log(t.request)})}},created:function(){this.getData(),this.getTasksStatusForClassStrategy()},mounted:function(){}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"a-main"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("新建任务")]),e._v(" "),s("el-button",{staticClass:"add-bt",attrs:{type:"text"},on:{click:e.openAddName}},[s("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),e._l(e.taskNameArray,function(t){return s("div",{key:t.index,staticClass:"card-content"},[s("i",{staticClass:"el-icon-edit",on:{click:function(s){return e.setName(t.taskName)}}}),e._v("\n      "+e._s(t.taskName)+"\n      "),s("el-button",{staticClass:"set-bt delete-task",attrs:{type:"danger",size:"mini",round:""},on:{click:function(s){return e.deleteTask(t.taskName)}}},[e._v("删除")]),e._v(" "),s("el-button",{staticClass:"set-bt",attrs:{type:"primary",size:"mini",round:""},on:{click:function(s){return e.toSetRules(t.taskName)}}},[e._v("查看")])],1)})],2)],1)},staticRenderFns:[]};var n=s("VU/8")(a,r,!1,function(e){s("5f5A")},"data-v-469e9072",null);t.default=n.exports},"5f5A":function(e,t){}});
//# sourceMappingURL=14.3fb47b7bdd66cc38e595.js.map